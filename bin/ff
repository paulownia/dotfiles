#!/bin/bash -e

if ! command -v mdfind 1>/dev/null 2>&1; then
	echo "[ERROR] mdfind is required. This script is intended for macOS." >&2
	exit 1
fi

if [[ -z $1 ]]; then
	echo "Usage: ff <filename> [search_path]" >&2
	exit 1
fi

# find regular files (excludes invisible files)
F="./"
if [[ -n $2 ]]; then
	F="$2"
fi

Q=$1
if [[ $Q != *"*"* ]]; then
	Q="*$Q*"
fi

mdfind "kMDItemFSName == $Q" -onlyin "$F"
