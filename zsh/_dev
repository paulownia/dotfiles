#compdef dev

local DEV_PROJECTS_FILE="$HOME/.local/share/dev-projects/dev"
local state

_arguments \
	'(- *)-l[list all projects]' \
	'(- *)-a[add project]:keyword:->pwd_keyword' \
	'(- *)-d[delete project]:project:->projects' \
	'(- *)*:project:->projects'

case "$state" in
	pwd_keyword)
		_values "keyword candidates" ${PWD:t}
		;;
	projects)
		[[ -z "$DEV_PROJECTS_FILE" || ! -f "$DEV_PROJECTS_FILE" ]] && return
		local -a CD_LIST
		CD_LIST=( $(cut -f 1 < "$DEV_PROJECTS_FILE") )
		_describe "Projects" CD_LIST
		;;
esac
